# Competitor Scraping Engine Configuration

# Language configuration
languages:
  # English is always the default source language
  source: "en"
  
  # Target languages to translate into
  # Format: "language_code": "language_name"
  targets:
    "es": "Spanish"
    # Add or remove languages as needed
    # Use ISO 639-1 two-letter language codes
    # Examples:
    # "ja": "Japanese"
    # "ko": "Korean"
    # "zh": "Chinese"
    # "ru": "Russian"
  
  # Number of categories to translate in one batch
  translation_batch_size: 50

# Target website to crawl
target_url: "https://www.manualslib.com"

# Database configuration
database:
  path: "database/manuals.db"
  
# Scheduling and execution configuration
scheduling:
  # Time allocation between scraper and manufacturer website finder (0-100)
  # Higher values allocate more time to competitor scraper
  # Lower values allocate more time to manufacturer website finder
  time_allocation: 70
  
  # Maximum runtime in minutes (0 means no time limit)
  max_runtime_minutes: 0
  
  # Checkpoint interval in minutes (save state for resuming)
  checkpoint_interval: 5
  
  # Background processing configuration
  background:
    # Enable background processing
    enabled: false
    
    # Process ID file to track background processes
    pid_file: "logs/ndaivi_process.pid"
    
    # Status file to track progress
    status_file: "logs/ndaivi_status.json"

# AI APIs configuration
ai_apis:
  anthropic:
    api_key: "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"
    model: "claude-3-haiku-20240307"
    sonnet_model: "claude-3-7-sonnet-20250219"

# Crawling settings
crawling:
  max_depth: 10  # Increased depth to ensure more comprehensive crawling
  delay_between_requests: 2  # seconds
  max_pages_per_run: 0  # 0 means no limit, will crawl until no pages remain
  build_sitemap: true  # Enable sitemap building
  respect_robots_txt: false  # Temporarily disable robots.txt to test scraper
  user_agent: "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36"
  initial_urls:
    - "https://www.manualslib.com"
  # Maximum URLs to crawl per domain
  max_urls_per_domain: 1
  # Request timeout in seconds
  request_timeout: 30
  # Maximum number of retries for failed requests
  max_retries: 3
  # Delay between retries in seconds
  retry_delay: 5
  # Whether to follow external links
  follow_external_links: false

# URL priority settings
url_priority:
  # Base priority values (lower is higher priority)
  seed_url_priority: 10
  manufacturer_page_priority: 20
  category_page_priority: 30
  product_page_priority: 40
  default_priority: 100
  # Priority modifiers
  depth_modifier: 5  # Priority decreases by this amount per depth level
  query_params_modifier: 10  # URLs with query parameters get lower priority
  keyword_match_bonus: -15  # Priority bonus for URLs with keyword matches

# Content extraction settings
content_extraction:
  # Maximum content length to extract (in characters)
  max_content_length: 50000
  # HTML elements to prioritize for extraction
  priority_elements:
    - "h1"
    - "h2"
    - "h3"
    - "title"
    - "meta[name='description']"
    - "meta[property='og:title']"
    - "meta[property='og:description']"
  # Elements to exclude from extraction
  exclude_elements:
    - "script"
    - "style"
    - "footer"
    - "nav"
    - "aside"
  # Maximum links to extract per page
  max_links_per_page: 100

# Claude analyzer settings
claude_analyzer:
  # Enable caching of Claude responses
  enable_cache: true
  # Cache expiration time in days
  cache_expiration_days: 7
  # Maximum tokens to use in requests
  max_tokens: 4000
  # Temperature for Claude API calls
  temperature: 0.1
  # Enable quick keyword pre-check before using Claude
  enable_keyword_precheck: true
  # Minimum confidence threshold for manufacturer detection
  min_confidence_threshold: 0.7

# Keywords for filtering
keywords:
  positive:
    - "manufacturer"
    - "brand"
    - "companies"
    - "products"
    - "category"
    - "catalog"
    - "brands"
  negative:
    - "cart"
    - "checkout"
    - "login"
    - "register"
    - "account"
    - "privacy"
    - "terms"

# Scraper configuration
scraper:
  # Maximum number of pages to process in a single batch
  batch_size: 100
  
  # Timeout in seconds for page requests
  request_timeout: 30
  
  # Number of retries for failed requests
  max_retries: 3
  
  # Delay between retries in seconds
  retry_delay: 5
  
  # Seed URLs for the scraper
  seed_urls:
    - "https://www.manualslib.com/"
  
# Manufacturer website finder configuration
manufacturer_finder:
  # Maximum number of manufacturers to process in a single batch
  batch_size: 20
  
  # Maximum number of search results to validate per manufacturer
  max_search_results: 3
  
  # Timeout in seconds for website validation
  validation_timeout: 45
  
  # Delay between manufacturer processing in seconds
  processing_delay: 3
